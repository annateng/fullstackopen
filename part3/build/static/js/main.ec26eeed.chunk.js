(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(14),l=t(2),i=t(3),s=t.n(i),m="/api/persons",d=function(e){return s.a.post(m,e).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then((function(e){return function(e){return e.data}}))},h=function(){return s.a.get(m).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){console.log("successful deletion")}))},p=function(e,n,t){t||(t=5e3),n(e),setTimeout((function(){return n(e)}),t)},g=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",borderColor:"yellow",padding:"10px",marginBottom:"10px"}},n)},w=function(e){var n=e.searchVal,t=e.handleChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))},E=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.persons,t=e.searchVal,a=e.setPersons,o=e.setErrorMessage;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("span",null,e.name," ",e.number,"   "),r.a.createElement("button",{type:"button",onClick:function(){return function(e,t){var r=n[n.map((function(e){return e.id})).indexOf(e)].name;if(t){var c=n.slice();c.splice(c.map((function(e){return e.id})).indexOf(e),1),b(e).then((function(e){a(c),p("".concat(r," was successfully removed from the phonebook"),o)})).catch((function(e){p("".concat(r," was already removed from the phonebook"),o),a(c)}))}else p("No change was made to the phonebook",o)}(e.id,window.confirm("delete ".concat(e.name,"?")))}},"delete"))}))},C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],m=i[1],b=Object(a.useState)(""),C=Object(l.a)(b,2),k=C[0],O=C[1],y=Object(a.useState)(""),j=Object(l.a)(y,2),N=j[0],S=j[1],x=Object(a.useState)(null),L=Object(l.a)(x,2),V=L[0],P=L[1];Object(a.useEffect)((function(){h().then((function(e){return o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:V}),r.a.createElement(w,{searchVal:N,handleChange:function(e){return S(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(E,{handleSubmit:function(e){if(e.preventDefault(),t.find((function(e){return e.name.toLowerCase()===s})))if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=Object(u.a)({},t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})));n.number=k,f(n.id,n).then((function(e){o(t.filter((function(e){return e.id!==n.id})).concat(n)),p("".concat(s,"'s phone number was successfully changed to ").concat(k),P)})).catch.catch((function(e){p(e.response.data.error,P)}))}else p("No change was made to the phonebook",P);else d({name:s,number:k}).then((function(e){o(t.concat(e)),p("".concat(s," was successfully added to the phonebook"),P)})).catch((function(e){p(e.response.data.error,P)}));m(""),O("")},newName:s,handleNameChange:function(e){return m(e.target.value)},newNumber:k,handleNumberChange:function(e){return O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("div",null,r.a.createElement(v,{persons:t,searchVal:N,setPersons:o,setErrorMessage:P})))};c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ec26eeed.chunk.js.map