{"version":3,"sources":["services/db.js","App.js","index.js"],"names":["baseUrl","newObject","axios","post","then","response","data","id","put","get","delete","console","log","showMessage","message","setErrorMessage","timeOut","setTimeout","Notification","style","color","background","fontSize","borderStyle","borderRadius","borderColor","padding","marginBottom","Filter","searchVal","handleChange","value","onChange","PersonForm","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","setPersons","filter","person","name","toLowerCase","includes","map","key","number","onClick","confirmed","personName","indexOf","personsCopy","slice","splice","dbService","res","catch","error","deletePerson","window","confirm","App","useState","setNewName","setNewNumber","setSearchVal","errorMessage","useEffect","db","event","target","preventDefault","find","p","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ec26eeed.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nconst create = (newObject) => axios\r\n    .post(baseUrl, newObject)\r\n    .then(response => response.data)\r\n\r\nconst update = (id, newObject) => axios\r\n    .put(`${baseUrl}/${id}`, newObject)\r\n    .then(response => response => response.data)\r\n\r\nconst getAll = () => axios\r\n    .get(baseUrl)\r\n    .then(response => response.data)\r\n\r\nconst deleteEntry = (id) => axios\r\n    .delete(`${baseUrl}/${id}`)\r\n    .then(response => {console.log('successful deletion')})\r\n\r\n\r\nexport default { create, update, getAll, deleteEntry };\r\n","import React, { useState, useEffect } from 'react'\r\nimport dbService from './services/db'\r\nimport db from './services/db'\r\n\r\n/* Reusable code for showing message to the user */\r\nconst showMessage = (message, setErrorMessage, timeOut) => {\r\n    if (!timeOut) timeOut = 5000 // default message display time is 5 seconds\r\n    setErrorMessage(message)\r\n    setTimeout(() => setErrorMessage(message), timeOut)\r\n}\r\n\r\n/******** BEGIN REACT COMPONENTS ***************************************/\r\n\r\n/** Notification  message shown to users */\r\nconst Notification = ({message}) => {\r\n  const notificationStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: '20px',\r\n    borderStyle: 'solid',\r\n    borderRadius: '5px',\r\n    borderColor: 'yellow',\r\n    padding: '10px',\r\n    marginBottom: '10px'\r\n  }\r\n  if (message === null) return null\r\n  else return <div style={notificationStyle}>{message}</div>\r\n}\r\n\r\n\r\nconst Filter = ({searchVal, handleChange}) => (\r\n  <div>\r\n    filter shown with: <input value={searchVal} onChange={handleChange} />\r\n  </div>\r\n)\r\n\r\nconst PersonForm = ({handleSubmit, newName, handleNameChange, newNumber, handleNumberChange}) => (\r\n  <form onSubmit={handleSubmit}>\r\n    <div>\r\n      name: <input value={newName} onChange={handleNameChange}/>\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber} onChange={handleNumberChange}/>\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst Persons = ({persons, searchVal, setPersons, setErrorMessage}) => {\r\n  \r\n  // DELETE PHONEBOOK ENTRY\r\n  const deletePerson = (id, confirmed) => {\r\n    const personName = persons[persons.map(person => person.id).indexOf(id)].name\r\n\r\n    // if not confirmed, do nothing\r\n    if (!confirmed) {\r\n      // set no change made message\r\n      showMessage(`No change was made to the phonebook`, setErrorMessage)\r\n    } else {\r\n      // remove person from the phonebook\r\n      const personsCopy = persons.slice()\r\n      personsCopy.splice(personsCopy.map(person => person.id).indexOf(id), 1)\r\n      \r\n      dbService.deleteEntry(id)\r\n        .then(res => {\r\n          setPersons(personsCopy)\r\n          // set successful deletion message\r\n          showMessage(`${personName} was successfully removed from the phonebook`, setErrorMessage)\r\n        })\r\n        .catch(error => { // catch error if entry was previously deleted already\r\n          showMessage(`${personName} was already removed from the phonebook`, setErrorMessage)\r\n          setPersons(personsCopy)\r\n        })\r\n    }\r\n  } /* end delete entry code */\r\n\r\n  // FILTER PHONEBOOK ENTRIES SHOWN\r\n  return persons.filter(\r\n    person => person.name.toLowerCase().includes(searchVal.toLowerCase())\r\n  ).map(\r\n      person => (\r\n        <div key={person.name}>\r\n          <span>{person.name} {person.number}   </span>\r\n          <button type='button' onClick={() => deletePerson(person.id, window.confirm(`delete ${person.name}?`))}>delete</button>\r\n        </div>\r\n      )\r\n  )\r\n} \r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchVal, setSearchVal ] = useState('')\r\n  const [ errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(\r\n    () => {db.getAll().then(response => setPersons(response))},\r\n    []\r\n  )\r\n\r\n  const handleNameChange = (event) => setNewName(event.target.value)\r\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n  const handleSearchChange = (event) => setSearchVal(event.target.value)\r\n\r\n  // CODE FOR CLICKING THE \"ADD\" BUTTON\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    // if name already exists in phonebook, update number on prompt\r\n    if (persons.find(person => person.name.toLowerCase() === newName)) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const person = {...persons.find(person => person.name.toLowerCase() === newName.toLowerCase())}\r\n        person.number = newNumber\r\n        dbService.update(person.id, person)\r\n            .then(response => {\r\n                // update persons array\r\n                setPersons(persons.filter(p => p.id !== person.id).concat(person))\r\n\r\n                // set successful number change message\r\n                showMessage(`${newName}'s phone number was successfully changed to ${newNumber}`, setErrorMessage)\r\n            })\r\n            .catch.catch(error => {showMessage(error.response.data.error, setErrorMessage)})\r\n      } else {\r\n        // set no change made message\r\n        showMessage(`No change was made to the phonebook`, setErrorMessage)\r\n      }\r\n    } else { // otherwise, add person to phone book\r\n      dbService.create({name: newName, number: newNumber})\r\n              .then(response => {\r\n                  setPersons(persons.concat(response))\r\n                  showMessage(`${newName} was successfully added to the phonebook`, setErrorMessage)\r\n                })\r\n                .catch(error => {showMessage(error.response.data.error, setErrorMessage)})\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  } /* END CODE FOR CLICKING \"ADD\" BUTTON */\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n        <Notification message={errorMessage} />\r\n        <Filter searchVal={searchVal} handleChange={handleSearchChange} />\r\n      <h2>add a new</h2>\r\n        <PersonForm handleSubmit={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <div>\r\n          <Persons persons={persons} searchVal={searchVal} setPersons={setPersons} setErrorMessage={setErrorMessage}/>\r\n      </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n);\n\n"],"sourceRoot":""}